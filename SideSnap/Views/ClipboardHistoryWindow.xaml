<Window x:Class="SideSnap.Views.ClipboardHistoryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Clipboard History"
        Height="600"
        Width="500"
        WindowStartupLocation="CenterScreen"
        Background="#ECF0F1">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#2C3E50" Padding="15">
            <StackPanel>
                <TextBlock Text="ðŸ“‹ Clipboard History"
                          Foreground="White"
                          FontSize="18"
                          FontWeight="Bold"/>
                <TextBlock Text="Access your recently copied items"
                          Foreground="#BDC3C7"
                          FontSize="11"
                          Margin="0,3,0,0"/>
            </StackPanel>
        </Border>

        <!-- History List -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="10">
            <ItemsControl x:Name="HistoryItemsControl">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White"
                               Margin="0,0,0,10"
                               CornerRadius="8"
                               BorderBrush="#BDC3C7"
                               BorderThickness="1"
                               Padding="12">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <!-- Item Header -->
                                <Grid Grid.Row="0" Margin="0,0,0,8">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Type}"
                                                  FontSize="12"
                                                  Foreground="#7F8C8D"
                                                  Margin="0,0,8,0"/>
                                        <TextBlock Text="{Binding CopiedAt, StringFormat='Copied: {0:g}'}"
                                                  FontSize="10"
                                                  Foreground="#7F8C8D"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="ðŸ“‹"
                                               Width="28"
                                               Height="28"
                                               Margin="0,0,5,0"
                                               Background="Transparent"
                                               BorderThickness="0"
                                               Cursor="Hand"
                                               ToolTip="Copy to clipboard"
                                               Click="CopyItem_Click"
                                               Tag="{Binding}"/>
                                        <Button Content="ðŸ“Œ"
                                               Width="28"
                                               Height="28"
                                               Margin="0,0,5,0"
                                               Background="Transparent"
                                               BorderThickness="0"
                                               Cursor="Hand"
                                               ToolTip="Pin item"
                                               Click="PinItem_Click"
                                               Tag="{Binding}"/>
                                        <Button Content="ðŸ—‘ï¸"
                                               Width="28"
                                               Height="28"
                                               Background="Transparent"
                                               BorderThickness="0"
                                               Cursor="Hand"
                                               ToolTip="Delete item"
                                               Click="DeleteItem_Click"
                                               Tag="{Binding}"/>
                                    </StackPanel>
                                </Grid>

                                <!-- Item Content -->
                                <Border Grid.Row="1"
                                       Background="#F8F9FA"
                                       BorderBrush="#DEE2E6"
                                       BorderThickness="1"
                                       CornerRadius="4"
                                       Padding="10"
                                       MaxHeight="150">
                                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                                        <TextBlock Text="{Binding Content}"
                                                  TextWrapping="Wrap"
                                                  FontSize="11"
                                                  FontFamily="Consolas"
                                                  Foreground="#2C3E50"/>
                                    </ScrollViewer>
                                </Border>

                                <!-- Pinned Indicator -->
                                <Border Grid.Row="2"
                                       Visibility="{Binding IsPinned, Converter={StaticResource BoolToVis}}"
                                       Margin="0,5,0,0">
                                    <TextBlock Text="ðŸ“Œ Pinned"
                                              FontSize="9"
                                              Foreground="#E67E22"
                                              FontWeight="Bold"/>
                                </Border>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Footer -->
        <Border Grid.Row="2" Background="White" Padding="10" BorderBrush="#BDC3C7" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="ðŸ—‘ï¸ Clear All"
                       Click="ClearAll_Click"
                       Width="120"
                       Height="35"
                       Margin="0,0,10,0"
                       Background="#E74C3C"
                       Foreground="White"
                       BorderThickness="0"
                       FontWeight="Bold"
                       Cursor="Hand"
                       Style="{StaticResource ModernButton}"/>
                <Button Content="Close"
                       Click="Close_Click"
                       Width="80"
                       Height="35"
                       Background="#95A5A6"
                       Foreground="White"
                       BorderThickness="0"
                       Cursor="Hand"
                       Style="{StaticResource ModernButton}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
